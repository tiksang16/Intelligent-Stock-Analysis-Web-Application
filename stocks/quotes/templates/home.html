{% extends 'base.html' %}

{% block content %}
<br/>
<br/>
<div class="tradingview-widget-container">
  <h1>Financial Charts</h1>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
  new TradingView.widget(
    {
      "width": "100%",
      "height": "600",
      "symbol": "TSLA",
      "interval": "D",
      "timezone": "Asia/Kolkata",
      "theme": "White",
      "style": "2",
      "locale": "in",
      "toolbar_bg": "#f1f3f6",
      "enable_publishing": false,
      "allow_symbol_change": true,
      "news": [
        "headlines"
      ],
      "container_id": "tradingview_197fc"
    }
  );
  </script>
</div>


{% if ticker %}
    {{ ticker }}
{% endif %}

{% if api %}
    {% if api == "Error..." %}
        There was a problem with your ticker symbol, please try again
    {% else %}
        <h1>{{ api.companyName }}</h1><br/>
        Price: ${{ api.latestPrice }}</h1><br/>
        Previous Close: {{ api.previousClose }}</h1><br/>
        Market Cap: {{ api.marketCap }}</h1><br/>
        YTD Change: {{ api.ytdChange }}</h1><br/>
        52 Week High: {{ api.week52High }}</h1><br/>
        52 Week Low: {{ api.week52Low }}</h1><br/>

    {% endif %}

{% endif %}

{% endblock %}